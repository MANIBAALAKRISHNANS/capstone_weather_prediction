# FIX: geolite2 Package Error - 3 Solutions

## THE ERROR
```
ERROR: Could not find a version that satisfies the requirement geolite2==2.0.0
ERROR: No matching distribution found for geolite2==2.0.0
```

## ROOT CAUSE
geolite2==2.0.0 is not available on PyPI anymore (removed/deprecated).

---

## SOLUTION 1: USE ALTERNATIVE (RECOMMENDED) ‚≠ê

Replace geolite2 with `geoip2` or `maxminddb-geolite2`

### Option 1A: Use geoip2 (Best)
```bash
python -m pip install geoip2
```

### Option 1B: Use maxminddb
```bash
python -m pip install maxminddb
```

### Option 1C: Simple alternative (No external package needed)
If you just want location detection, use a simpler API:

```python
# In your app, replace geolite2 code with:
import requests

def get_user_location():
    try:
        response = requests.get('https://ipapi.co/json/', timeout=5)
        data = response.json()
        return data.get('latitude', 28.6139), data.get('longitude', 77.2090), data.get('city', 'Unknown')
    except:
        return 28.6139, 77.2090, "New Delhi"
```

This needs NO geolite2 installation!

---

## SOLUTION 2: SKIP geolite2 ENTIRELY (EASIEST)

### Step 1: Remove geolite2 from requirements.txt
Open `requirements.txt` and delete or comment out:
```
# geolite2==2.0.0
```

### Step 2: Update requirements.txt to:
```
streamlit==1.28.1
pandas==2.0.3
numpy==1.24.3
scikit-learn==1.3.0
xgboost==2.0.0
tensorflow==2.13.0
plotly==5.17.0
requests==2.31.0
```

### Step 3: Install WITHOUT geolite2
```bash
python -m pip install -r requirements.txt
```

### Step 4: Use fallback location in app
The app already has fallback coordinates! No geolite2 needed!

Users can:
- Manually enter city name
- Enter coordinates
- Use default location (New Delhi)

---

## SOLUTION 3: INSTALL FROM ALTERNATE SOURCE

### Try pip-based alternatives:
```bash
# Try 1: Use geoip2-geolite2
python -m pip install geoip2-geolite2

# Try 2: Use ipaddress (built-in, no install needed)
# Already in Python standard library!

# Try 3: Use geolite2 from GitHub
python -m pip install git+https://github.com/maxmind/geolite2-python.git
```

---

## RECOMMENDED: SIMPLEST SOLUTION ‚úÖ

Just use this (requires nothing extra):

```bash
# DON'T install geolite2
# Skip it entirely!

# Install everything else
python -m pip install streamlit pandas numpy scikit-learn xgboost tensorflow plotly requests

# Run your app
python -m streamlit run app.py
```

Your app will work with fallback location!

---

## COMPLETE FIX WORKFLOW

### Step 1: Remove geolite2
Edit `requirements.txt`:

```
streamlit==1.28.1
pandas==2.0.3
numpy==1.24.3
scikit-learn==1.3.0
xgboost==2.0.0
tensorflow==2.13.0
plotly==5.17.0
requests==2.31.0
# geolite2==2.0.0  ‚Üê REMOVE or COMMENT this line
```

### Step 2: Install requirements
```bash
python -m pip install -r requirements.txt
```

### Step 3: Update app.py
Replace the geolite2 import with this:

Find this in app.py:
```python
from geolite2 import geolite2

def get_user_location():
    try:
        response = requests.get('https://api.ipify.org?format=json', timeout=5)
        ip = response.json()['ip']
        match = geolite2.reader().get(ip)
        if match:
            lat = match['location']['latitude']
            lon = match['location']['longitude']
            city = match.get('city', 'Unknown')
            return lat, lon, city
    except:
        pass
    return 28.6139, 77.2090, "New Delhi"
```

Replace with this:
```python
def get_user_location():
    """Get user location using free ipapi service (no package needed)"""
    try:
        response = requests.get('https://ipapi.co/json/', timeout=5)
        data = response.json()
        lat = data.get('latitude', 28.6139)
        lon = data.get('longitude', 77.2090)
        city = data.get('city', 'Unknown')
        return lat, lon, city
    except:
        pass
    
    # Fallback: New Delhi coordinates
    return 28.6139, 77.2090, "New Delhi"
```

### Step 4: Run app
```bash
python -m streamlit run app.py
```

**Done!** No geolite2 needed! ‚úÖ

---

## QUICK COMMANDS TO RUN NOW

```bash
# Navigate to project
cd C:\Users\Asus\capstone_weather_prediction

# Update requirements.txt (or delete geolite2 line manually)
# Then install:
python -m pip install streamlit pandas numpy scikit-learn xgboost tensorflow plotly requests

# Or install from requirements without geolite2:
python -m pip install -r requirements.txt

# Run app
python -m streamlit run app.py
```

---

## THREE OPTIONS RANKED

### Option 1: Skip geolite2 (EASIEST) ‚≠ê‚≠ê‚≠ê
- Remove from requirements.txt
- Use fallback location
- App works perfectly
- No extra installation
- **RECOMMENDED!**

### Option 2: Use geoip2 (ALTERNATIVE) ‚≠ê‚≠ê
- Different package, more official
- Still requires installation
- More maintenance
- More complex

### Option 3: Use custom API (FLEXIBLE) ‚≠ê‚≠ê
- Use ipapi.co (free, no key)
- Works without any Python package
- Simple implementation
- Most reliable

---

## UPDATED app.py SECTION

Here's the exact code to replace geolite2 section:

```python
# =====================================================
# FUNCTION: Get User Location (NO GEOLITE2 NEEDED!)
# =====================================================
@st.cache_data(ttl=3600)
def get_user_location():
    """
    Get user's location using ipapi service
    No additional packages needed!
    """
    try:
        # Method 1: Use ipapi.co (free, reliable)
        response = requests.get('https://ipapi.co/json/', timeout=5)
        data = response.json()
        
        lat = data.get('latitude', 28.6139)
        lon = data.get('longitude', 77.2090)
        city = data.get('city', 'Unknown')
        country = data.get('country_name', 'India')
        
        if lat and lon:
            return lat, lon, city
            
    except Exception as e:
        st.warning(f"Could not detect location: {e}")
    
    # Fallback: Use default coordinates (New Delhi)
    return 28.6139, 77.2090, "New Delhi"
```

Just copy this function into your app.py, replacing the old geolite2 version!

---

## REQUIREMENTS.TXT (UPDATED)

```
streamlit==1.28.1
pandas==2.0.3
numpy==1.24.3
scikit-learn==1.3.0
xgboost==2.0.0
tensorflow==2.13.0
plotly==5.17.0
requests==2.31.0
```

No geolite2! All your needs covered!

---

## INSTALLATION COMMANDS

```bash
# All-in-one installation (no geolite2)
python -m pip install streamlit pandas numpy scikit-learn xgboost tensorflow plotly requests

# Or one by one:
python -m pip install streamlit
python -m pip install pandas
python -m pip install numpy
python -m pip install scikit-learn
python -m pip install xgboost
python -m pip install tensorflow
python -m pip install plotly
python -m pip install requests
```

---

## WHAT HAPPENS

**Before (with geolite2):**
- Tries to install geolite2==2.0.0
- Package doesn't exist
- Installation fails
- ‚ùå App won't run

**After (without geolite2):**
- Installs streamlit, pandas, numpy, etc.
- Uses ipapi.co for location (free API)
- Installation succeeds
- ‚úÖ App runs perfectly!

---

## FALLBACK LOCATION

If location detection fails, app uses:
- Latitude: 28.6139 (New Delhi)
- Longitude: 77.2090
- City: "New Delhi"

Users can always manually select:
- City name
- Custom coordinates
- Any location!

---

## YOUR COMPLETE WORKFLOW

```bash
# Step 1: Navigate to project
cd C:\Users\Asus\capstone_weather_prediction

# Step 2: Upgrade pip
python -m pip install --upgrade pip

# Step 3: Install requirements (WITHOUT geolite2)
python -m pip install streamlit pandas numpy scikit-learn xgboost tensorflow plotly requests

# Step 4: Run app
python -m streamlit run app.py

# Step 5: App opens at http://localhost:8501 ‚úÖ
```

---

## TESTING

After installing, test each import:

```bash
python -c "import streamlit; print('‚úì Streamlit OK')"
python -c "import pandas; print('‚úì Pandas OK')"
python -c "import numpy; print('‚úì NumPy OK')"
python -c "import sklearn; print('‚úì Scikit-learn OK')"
python -c "import xgboost; print('‚úì XGBoost OK')"
python -c "import tensorflow; print('‚úì TensorFlow OK')"
python -c "import plotly; print('‚úì Plotly OK')"
python -c "import requests; print('‚úì Requests OK')"
```

All should show ‚úì OK!

---

## SUMMARY

| Step | Action | Command |
|------|--------|---------|
| 1 | Remove geolite2 | Edit requirements.txt |
| 2 | Install packages | `python -m pip install -r requirements.txt` |
| 3 | Update app code | Replace geolite2 function with ipapi version |
| 4 | Run app | `python -m streamlit run app.py` |
| 5 | Success | App opens at localhost:8501 ‚úÖ |

---

## FINAL ANSWER

**The easiest solution:**

1. Remove `geolite2==2.0.0` from requirements.txt
2. Run: `python -m pip install -r requirements.txt`
3. Use ipapi.co instead (no package needed)
4. App works perfectly!

**No more geolite2 error!** ‚úÖ

---

**You can now proceed with your project!** üöÄ
